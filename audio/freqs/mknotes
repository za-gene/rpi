#!/usr/bin/env perl

open(DATA, "<notes.txt");
open(C, ">notes.c");

my $hdr = <<'EOI';
/* This file was automatically generated by mknotes
*/

#include "notes.h"

struct notes_t notes [] = {
EOI

print C $hdr;
my $count = 0;
while(<DATA>) {
	chomp $_;
	my ($note, $freq) = split /\s+/, $_;
	$freq = int($freq+0.5);
	($note) = split /\//, $note; # remove stuff after /
	print C "\t{\"$note\",\t$freq}";
	if($note ne "B8") { print C ","; }
	print C "\t// $count";
	if($note eq "C4") { print C "  middle C";}
	print C "\n";
	$count++;
}

# use4 interpolation
my $ftr = << "EOI";
};

int num_notes = $count;
EOI

print C $ftr;

close(C);
close(DATA);
